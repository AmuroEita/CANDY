\hypertarget{classCANDY_1_1ParallelPartitionIndex}{}\doxysection{CANDY\+::Parallel\+Partition\+Index Class Reference}
\label{classCANDY_1_1ParallelPartitionIndex}\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}


A basic parallel index, works under generic data partition, allow configurable index of threads, following round-\/robin insert and map-\/reduce query, have an optional congestion-\/and-\/drop feature.  




{\ttfamily \#include $<$CANDY/\+Parallel\+Partition\+Index.\+h$>$}



Inheritance diagram for CANDY\+::Parallel\+Partition\+Index\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{classCANDY_1_1ParallelPartitionIndex__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for CANDY\+::Parallel\+Partition\+Index\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCANDY_1_1ParallelPartitionIndex__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_aad813d4f3f76a59f808ed836c7b627b9}{load\+Initial\+Tensor}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em load the initial tensors of a data base, use this BEFORE \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a2474464755d32412df66c0ca90e8b13c}\label{classCANDY_1_1ParallelPartitionIndex_a2474464755d32412df66c0ca90e8b13c}} 
virtual void \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a2474464755d32412df66c0ca90e8b13c}{reset}} ()
\begin{DoxyCompactList}\small\item\em reset this index to inited status \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_aeab084deb363745ce62519ba0afd01d8}{set\+Config}} (\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{INTELLI\+::\+Config\+Map\+Ptr}} cfg)
\begin{DoxyCompactList}\small\item\em set the index-\/specfic config related to one index \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em insert a tensor \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_afbeb98090cd0b350f88f9c3dbca1b530}{delete\+Tensor}} (torch\+::\+Tensor \&t, int64\+\_\+t k=1)
\begin{DoxyCompactList}\small\item\em delete a tensor \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a02338950a960a583fc6f64f3bb8fc2f8}{revise\+Tensor}} (torch\+::\+Tensor \&t, torch\+::\+Tensor \&w)
\begin{DoxyCompactList}\small\item\em revise a tensor \end{DoxyCompactList}\item 
virtual std\+::vector$<$ torch\+::\+Tensor $>$ \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a6a6510e6bdf71f8aac457f447426e325}{get\+Tensor\+By\+Index}} (std\+::vector$<$ faiss\+::idx\+\_\+t $>$ \&idx, int64\+\_\+t k)
\begin{DoxyCompactList}\small\item\em return a vector of tensors according to some index \end{DoxyCompactList}\item 
virtual torch\+::\+Tensor \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a748632b1ee4dfb4103984879a1f9b0e0}{raw\+Data}} ()
\begin{DoxyCompactList}\small\item\em return the raw\+Data of tensor \end{DoxyCompactList}\item 
virtual std\+::vector$<$ torch\+::\+Tensor $>$ \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_ae2ce22bf1157fd1df2f5c4eb6d90eae5}{search\+Tensor}} (torch\+::\+Tensor \&q, int64\+\_\+t k)
\begin{DoxyCompactList}\small\item\em search the k-\/\+NN of a query tensor, return the result tensors \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_af32d13d2b41277c07fd451178fc24988}{start\+HPC}} ()
\begin{DoxyCompactList}\small\item\em some extra set-\/ups if the index has HPC fetures \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a53c9ed029555a10ab0a4fa586d10590b}{end\+HPC}} ()
\begin{DoxyCompactList}\small\item\em some extra termination if the index has HPC fetures \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_aa0c91b108beb0e52f928925c280d76aa}{set\+Frozen\+Level}} (int64\+\_\+t frozen\+Lv)
\begin{DoxyCompactList}\small\item\em set the frozen level of online updating internal state \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a6f60a58ad4079df030288484c001162b}{offline\+Build}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em offline build phase \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_af0cb5d35d361f77fccb804dbada191e9}{wait\+Pending\+Operations}} ()
\begin{DoxyCompactList}\small\item\em a busy waitting for all pending operations to be done \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_aabfd3bc203e3650a4b248d05eaa61209}{load\+Initial\+String\+Object}} (torch\+::\+Tensor \&t, std\+::vector$<$ std\+::string $>$ \&strs)
\begin{DoxyCompactList}\small\item\em load the initial tensors of a data base along with its string objects, use this BEFORE \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_ada6be35ed91e568fc26c7f0d9079483b}{insert\+String\+Object}} (torch\+::\+Tensor \&t, std\+::vector$<$ std\+::string $>$ \&strs)
\begin{DoxyCompactList}\small\item\em insert a string object \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a59076d1629c2f5fa9770167868cd1a0a}{delete\+String\+Object}} (torch\+::\+Tensor \&t, int64\+\_\+t k=1)
\begin{DoxyCompactList}\small\item\em delete tensor along with its corresponding string object \end{DoxyCompactList}\item 
virtual std\+::vector$<$ std\+::vector$<$ std\+::string $>$ $>$ \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a013cd612a665dd6c91e86590ea5ca986}{search\+String\+Object}} (torch\+::\+Tensor \&q, int64\+\_\+t k)
\begin{DoxyCompactList}\small\item\em search the k-\/\+NN of a query tensor, return the linked string objects \end{DoxyCompactList}\item 
virtual std\+::tuple$<$ std\+::vector$<$ torch\+::\+Tensor $>$, std\+::vector$<$ std\+::vector$<$ std\+::string $>$ $>$ $>$ \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a03db8b8c2e0430d771c070db4cd5ce25}{search\+Tensor\+And\+String\+Object}} (torch\+::\+Tensor \&q, int64\+\_\+t k)
\begin{DoxyCompactList}\small\item\em search the k-\/\+NN of a query tensor, return the linked string objects and original tensors \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_ae42a798e463a98f619ce8d2b64f85ac7}\label{classCANDY_1_1ParallelPartitionIndex_ae42a798e463a98f619ce8d2b64f85ac7}} 
std\+::vector$<$ Tensor\+List\+Idx\+Queue\+Ptr $>$ {\bfseries reduce\+Queue}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aa8e8183c487cebfac61fad86dfbc722a}\label{classCANDY_1_1ParallelPartitionIndex_aa8e8183c487cebfac61fad86dfbc722a}} 
std\+::vector$<$ Tensor\+Str\+Vec\+Queue\+Ptr $>$ {\bfseries reduce\+Str\+Queue}
\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a329c62387674bb206d2f16dc06540942}\label{classCANDY_1_1ParallelPartitionIndex_a329c62387674bb206d2f16dc06540942}} 
void {\bfseries insert\+Tensor\+Inline} (torch\+::\+Tensor \&t)
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a3036ce8a339042f497abd3b9d74eb8b2}\label{classCANDY_1_1ParallelPartitionIndex_a3036ce8a339042f497abd3b9d74eb8b2}} 
void {\bfseries partition\+Build\+In\+Line} (torch\+::\+Tensor \&t)
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_ad4490b4b706d7610b04e7f85cc938103}\label{classCANDY_1_1ParallelPartitionIndex_ad4490b4b706d7610b04e7f85cc938103}} 
void {\bfseries partition\+Load\+In\+Line} (torch\+::\+Tensor \&t)
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_af6a384cdcf16500259ba1d20ab5a118a}\label{classCANDY_1_1ParallelPartitionIndex_af6a384cdcf16500259ba1d20ab5a118a}} 
void {\bfseries insert\+String\+Inline} (torch\+::\+Tensor \&t, std\+::vector$<$ string $>$ \&s)
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a0c23ca0fc159bcaee1e0424fe909e747}\label{classCANDY_1_1ParallelPartitionIndex_a0c23ca0fc159bcaee1e0424fe909e747}} 
void {\bfseries partition\+Load\+String\+In\+Line} (torch\+::\+Tensor \&t, std\+::vector$<$ string $>$ \&s)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a3c24499813c03af7248f1b8003196621}\label{classCANDY_1_1ParallelPartitionIndex_a3c24499813c03af7248f1b8003196621}} 
int64\+\_\+t {\bfseries parallel\+Workers}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aada6d5b7cc1e211a23353a04bbb13715}\label{classCANDY_1_1ParallelPartitionIndex_aada6d5b7cc1e211a23353a04bbb13715}} 
int64\+\_\+t {\bfseries insert\+Idx}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a4a8833c5e7646c2827722ee463d047f3}\label{classCANDY_1_1ParallelPartitionIndex_a4a8833c5e7646c2827722ee463d047f3}} 
std\+::vector$<$ \mbox{\hyperlink{group__CANDY__lib__bottom_ga1412e02db58589ba4ea2ab27da060e4f}{Parallel\+Index\+Worker\+Ptr}} $>$ {\bfseries workers}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a9360df6502295957f87bdce9f1387a00}\label{classCANDY_1_1ParallelPartitionIndex_a9360df6502295957f87bdce9f1387a00}} 
int64\+\_\+t {\bfseries vec\+Dim}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_af34efab99886c6d99696814fbf675bf9}\label{classCANDY_1_1ParallelPartitionIndex_af34efab99886c6d99696814fbf675bf9}} 
int64\+\_\+t {\bfseries fine\+Grained\+Parallel\+Insert}
\item 
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_ab5cbb86fbf7aac51a30c1aaf9f6b4a9f}\label{classCANDY_1_1ParallelPartitionIndex_ab5cbb86fbf7aac51a30c1aaf9f6b4a9f}} 
int64\+\_\+t {\bfseries shared\+Build}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A basic parallel index, works under generic data partition, allow configurable index of threads, following round-\/robin insert and map-\/reduce query, have an optional congestion-\/and-\/drop feature. 

\begin{DoxyNote}{Note}
Concurrency policy is strictly read after write 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
Don\textquotesingle{}t mix the usage of tensor-\/only I/O and tensor-\/string hybrid I/O in one indexing class 

remember to call star\+HPC and \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a53c9ed029555a10ab0a4fa586d10590b}{end\+HPC}} 
\end{DoxyWarning}
\begin{DoxyNote}{Note}
special parameters
\begin{DoxyItemize}
\item parallel\+Worker\+\_\+algo\+Tag The algo tag of this worker, String, default flat
\item parallel\+Worker\+\_\+queue\+Size The input queue size of this worker, I64, default 10
\item parallel\+Workers The number of paraller workers, I64, default 1 (set this to less than 0 will use max hardware\+\_\+concurrency);
\item vec\+Dim, the dimension of vectors, default 768, I64
\item fine\+Grained\+Parallel\+Insert, whether or not conduct the insert in an extremely fine-\/grained way, i.\+e., per-\/row, I64, default 0
\item shared\+Build whether let all sharding using shared build, 1, I64
\item congestion\+Drop, whether or not drop the data when congestion occurs, I64, default 0 @warnning Make sure you are using 2D tensors! 
\end{DoxyItemize}
\end{DoxyNote}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a59076d1629c2f5fa9770167868cd1a0a}\label{classCANDY_1_1ParallelPartitionIndex_a59076d1629c2f5fa9770167868cd1a0a}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!deleteStringObject@{deleteStringObject}}
\index{deleteStringObject@{deleteStringObject}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{deleteStringObject()}{deleteStringObject()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::delete\+String\+Object (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{int64\+\_\+t}]{k = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



delete tensor along with its corresponding string object 

\begin{DoxyNote}{Note}
This is majorly an online function 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row \\
\hline
{\em k} & the number of nearest neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the delet is successful 
\end{DoxyReturn}

\begin{DoxyEnumerate}
\item broadcast the query
\item prepare to collect
\item reduce
\end{DoxyEnumerate}

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a409739ea60c38ce4a68f0aa04c44f38d}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_afbeb98090cd0b350f88f9c3dbca1b530}\label{classCANDY_1_1ParallelPartitionIndex_afbeb98090cd0b350f88f9c3dbca1b530}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!deleteTensor@{deleteTensor}}
\index{deleteTensor@{deleteTensor}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{deleteTensor()}{deleteTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::delete\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{int64\+\_\+t}]{k = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



delete a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index needs to be single row \\
\hline
{\em k} & the number of nearest neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the deleting is successful 
\end{DoxyReturn}

\begin{DoxyEnumerate}
\item broadcast the query
\item prepare to collect
\item reduce
\end{DoxyEnumerate}

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a56adc37171b02a9e667f10e35c0682d8}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a53c9ed029555a10ab0a4fa586d10590b}\label{classCANDY_1_1ParallelPartitionIndex_a53c9ed029555a10ab0a4fa586d10590b}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!endHPC@{endHPC}}
\index{endHPC@{endHPC}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{endHPC()}{endHPC()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::end\+HPC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



some extra termination if the index has HPC fetures 

\begin{DoxyReturn}{Returns}
bool whether the HPC termination is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a3c4cdf616320ab7208fc7025b37b9a08}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a6a6510e6bdf71f8aac457f447426e325}\label{classCANDY_1_1ParallelPartitionIndex_a6a6510e6bdf71f8aac457f447426e325}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!getTensorByIndex@{getTensorByIndex}}
\index{getTensorByIndex@{getTensorByIndex}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{getTensorByIndex()}{getTensorByIndex()}}
{\footnotesize\ttfamily std\+::vector$<$ torch\+::\+Tensor $>$ CANDY\+::\+Parallel\+Partition\+Index\+::get\+Tensor\+By\+Index (\begin{DoxyParamCaption}\item[{std\+::vector$<$ faiss\+::idx\+\_\+t $>$ \&}]{idx,  }\item[{int64\+\_\+t}]{k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



return a vector of tensors according to some index 


\begin{DoxyParams}{Parameters}
{\em idx} & the index, follow faiss\textquotesingle{}s style, allow the KNN index of multiple queries \\
\hline
{\em k} & the returned neighbors, i.\+e., will be the number of rows of each returned tensor \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a vector of tensors, each tensor represent KNN results of one query in idx 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_abed787ede5e68179978545d80e35deec}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_ada6be35ed91e568fc26c7f0d9079483b}\label{classCANDY_1_1ParallelPartitionIndex_ada6be35ed91e568fc26c7f0d9079483b}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!insertStringObject@{insertStringObject}}
\index{insertStringObject@{insertStringObject}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{insertStringObject()}{insertStringObject()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::insert\+String\+Object (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{std\+::vector$<$ std\+::string $>$ \&}]{strs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



insert a string object 

\begin{DoxyNote}{Note}
This is majorly an online function 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row \\
\hline
{\em strs} & the corresponding list of strings \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the insertion is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a9946053cdb6b0a6c8723b7404d63499d}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}\label{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!insertTensor@{insertTensor}}
\index{insertTensor@{insertTensor}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{insertTensor()}{insertTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::insert\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



insert a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the insertion is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a10e65ecee21528fe6df84114b61110d4}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aabfd3bc203e3650a4b248d05eaa61209}\label{classCANDY_1_1ParallelPartitionIndex_aabfd3bc203e3650a4b248d05eaa61209}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!loadInitialStringObject@{loadInitialStringObject}}
\index{loadInitialStringObject@{loadInitialStringObject}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{loadInitialStringObject()}{loadInitialStringObject()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::load\+Initial\+String\+Object (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{std\+::vector$<$ std\+::string $>$ \&}]{strs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



load the initial tensors of a data base along with its string objects, use this BEFORE \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} 

\begin{DoxyNote}{Note}
This is majorly an offline function, and may be different from \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} for some indexes 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row
\begin{DoxyItemize}
\item 
\end{DoxyItemize}\\
\hline
{\em strs} & the corresponding list of strings \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the loading is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a2184c1380f1d9f6516b174beec06eda9}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aad813d4f3f76a59f808ed836c7b627b9}\label{classCANDY_1_1ParallelPartitionIndex_aad813d4f3f76a59f808ed836c7b627b9}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!loadInitialTensor@{loadInitialTensor}}
\index{loadInitialTensor@{loadInitialTensor}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{loadInitialTensor()}{loadInitialTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::load\+Initial\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



load the initial tensors of a data base, use this BEFORE \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} 

\begin{DoxyNote}{Note}
This is majorly an offline function, and may be different from \mbox{\hyperlink{classCANDY_1_1ParallelPartitionIndex_a75c5a4f6b2c7c060e79226d28f687bb4}{insert\+Tensor}} for some indexes 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the loading is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_af801592ccc0813c97a2ff45da40a1312}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a6f60a58ad4079df030288484c001162b}\label{classCANDY_1_1ParallelPartitionIndex_a6f60a58ad4079df030288484c001162b}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!offlineBuild@{offlineBuild}}
\index{offlineBuild@{offlineBuild}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{offlineBuild()}{offlineBuild()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::offline\+Build (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



offline build phase 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor for offline build \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the building is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_aca873d66824f385feac1a7cb49abdfac}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a748632b1ee4dfb4103984879a1f9b0e0}\label{classCANDY_1_1ParallelPartitionIndex_a748632b1ee4dfb4103984879a1f9b0e0}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!rawData@{rawData}}
\index{rawData@{rawData}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{rawData()}{rawData()}}
{\footnotesize\ttfamily torch\+::\+Tensor CANDY\+::\+Parallel\+Partition\+Index\+::raw\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



return the raw\+Data of tensor 

\begin{DoxyReturn}{Returns}
The raw data stored in tensor 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a2e1e1353dec39fc9eab887d97975448e}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a02338950a960a583fc6f64f3bb8fc2f8}\label{classCANDY_1_1ParallelPartitionIndex_a02338950a960a583fc6f64f3bb8fc2f8}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!reviseTensor@{reviseTensor}}
\index{reviseTensor@{reviseTensor}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{reviseTensor()}{reviseTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::revise\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{torch\+::\+Tensor \&}]{w }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



revise a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor to be revised \\
\hline
{\em w} & the revised value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the revising is successful 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
only support to delete and insert, no straightforward revision 
\end{DoxyNote}
only allow to delete and insert, no straightforward revision

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a90e72adba27ddcf8c71180f557bb78d5}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a013cd612a665dd6c91e86590ea5ca986}\label{classCANDY_1_1ParallelPartitionIndex_a013cd612a665dd6c91e86590ea5ca986}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!searchStringObject@{searchStringObject}}
\index{searchStringObject@{searchStringObject}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{searchStringObject()}{searchStringObject()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::vector$<$ std\+::string $>$ $>$ CANDY\+::\+Parallel\+Partition\+Index\+::search\+String\+Object (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{q,  }\item[{int64\+\_\+t}]{k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



search the k-\/\+NN of a query tensor, return the linked string objects 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, allow multiple rows \\
\hline
{\em k} & the returned neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::vector$<$std\+::vector$<$std\+::string$>$$>$ the result object for each row of query 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a2d641c1ab983db0c3def862d6045ca6b}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_ae2ce22bf1157fd1df2f5c4eb6d90eae5}\label{classCANDY_1_1ParallelPartitionIndex_ae2ce22bf1157fd1df2f5c4eb6d90eae5}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!searchTensor@{searchTensor}}
\index{searchTensor@{searchTensor}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{searchTensor()}{searchTensor()}}
{\footnotesize\ttfamily std\+::vector$<$ torch\+::\+Tensor $>$ CANDY\+::\+Parallel\+Partition\+Index\+::search\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{q,  }\item[{int64\+\_\+t}]{k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



search the k-\/\+NN of a query tensor, return the result tensors 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, allow multiple rows \\
\hline
{\em k} & the returned neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::vector$<$torch\+::\+Tensor$>$ the result tensor for each row of query 
\end{DoxyReturn}

\begin{DoxyEnumerate}
\item broadcast the query
\item prepare to collect
\item reduce
\end{DoxyEnumerate}

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a39069fe9cb1f16910695c091b768dbe8}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_a03db8b8c2e0430d771c070db4cd5ce25}\label{classCANDY_1_1ParallelPartitionIndex_a03db8b8c2e0430d771c070db4cd5ce25}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!searchTensorAndStringObject@{searchTensorAndStringObject}}
\index{searchTensorAndStringObject@{searchTensorAndStringObject}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{searchTensorAndStringObject()}{searchTensorAndStringObject()}}
{\footnotesize\ttfamily std\+::tuple$<$ std\+::vector$<$ torch\+::\+Tensor $>$, std\+::vector$<$ std\+::vector$<$ std\+::string $>$ $>$ $>$ CANDY\+::\+Parallel\+Partition\+Index\+::search\+Tensor\+And\+String\+Object (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{q,  }\item[{int64\+\_\+t}]{k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



search the k-\/\+NN of a query tensor, return the linked string objects and original tensors 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, allow multiple rows \\
\hline
{\em k} & the returned neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::tuple$<$std\+::vector$<$torch\+::\+Tensor$>$,std\+::vector$<$std\+::vector$<$std\+::string$>$$>$$>$ 
\end{DoxyReturn}

\begin{DoxyEnumerate}
\item broadcast the query
\item prepare to collect
\item reduce
\end{DoxyEnumerate}

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_af9c6596f497da56d887fec3ab4daa5f7}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aeab084deb363745ce62519ba0afd01d8}\label{classCANDY_1_1ParallelPartitionIndex_aeab084deb363745ce62519ba0afd01d8}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!setConfig@{setConfig}}
\index{setConfig@{setConfig}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{setConfig()}{setConfig()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::set\+Config (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{INTELLI\+::\+Config\+Map\+Ptr}}}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



set the index-\/specfic config related to one index 


\begin{DoxyParams}{Parameters}
{\em cfg} & the config of this class \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the configuration is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a01f91296bd41aa55dd6a4c6465cc3a19}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_aa0c91b108beb0e52f928925c280d76aa}\label{classCANDY_1_1ParallelPartitionIndex_aa0c91b108beb0e52f928925c280d76aa}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!setFrozenLevel@{setFrozenLevel}}
\index{setFrozenLevel@{setFrozenLevel}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{setFrozenLevel()}{setFrozenLevel()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::set\+Frozen\+Level (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{frozen\+Lv }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



set the frozen level of online updating internal state 


\begin{DoxyParams}{Parameters}
{\em frozen\+Lv} & the level of frozen, 0 means freeze any online update in internal state \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the setting is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a637e0a15f3753c2188da92f8b787061d}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_af32d13d2b41277c07fd451178fc24988}\label{classCANDY_1_1ParallelPartitionIndex_af32d13d2b41277c07fd451178fc24988}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!startHPC@{startHPC}}
\index{startHPC@{startHPC}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{startHPC()}{startHPC()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::start\+HPC (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



some extra set-\/ups if the index has HPC fetures 

\begin{DoxyReturn}{Returns}
bool whether the HPC set-\/up is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_abb4333a11499fc6c88d1d78bc77138f4}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1ParallelPartitionIndex_af0cb5d35d361f77fccb804dbada191e9}\label{classCANDY_1_1ParallelPartitionIndex_af0cb5d35d361f77fccb804dbada191e9}} 
\index{CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}!waitPendingOperations@{waitPendingOperations}}
\index{waitPendingOperations@{waitPendingOperations}!CANDY::ParallelPartitionIndex@{CANDY::ParallelPartitionIndex}}
\doxysubsubsection{\texorpdfstring{waitPendingOperations()}{waitPendingOperations()}}
{\footnotesize\ttfamily bool CANDY\+::\+Parallel\+Partition\+Index\+::wait\+Pending\+Operations (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



a busy waitting for all pending operations to be done 

\begin{DoxyNote}{Note}
in this index, there are may be some un-\/commited write due to the parallel queues 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
bool, whether the waitting is actually done; 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a06bf1c698d6c4fa8ac899e69b83837f1}{CANDY\+::\+Abstract\+Index}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\+CANDY/\mbox{\hyperlink{ParallelPartitionIndex_8h}{Parallel\+Partition\+Index.\+h}}\item 
src/\+CANDY/\mbox{\hyperlink{ParallelPartitionIndex_8cpp}{Parallel\+Partition\+Index.\+cpp}}\end{DoxyCompactItemize}
