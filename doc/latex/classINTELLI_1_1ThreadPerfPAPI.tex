\hypertarget{classINTELLI_1_1ThreadPerfPAPI}{}\doxysection{INTELLI\+::Thread\+Perf\+PAPI Class Reference}
\label{classINTELLI_1_1ThreadPerfPAPI}\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}


The top entity to provide perf traces by using PAPI lib.  




{\ttfamily \#include $<$Utils/\+Thread\+Perf\+PAPI.\+hpp$>$}



Inheritance diagram for INTELLI\+::Thread\+Perf\+PAPI\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=213pt]{classINTELLI_1_1ThreadPerfPAPI__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for INTELLI\+::Thread\+Perf\+PAPI\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classINTELLI_1_1ThreadPerfPAPI__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a60f92e8ebf8ad274092884d568c6582a}{Thread\+Perf\+PAPI}} (int cpu)
\begin{DoxyCompactList}\small\item\em To setup this perf to specific cpu. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a16d0c4e647318d1d87daafdfa85832f4}{add\+Papi\+Tag}} (std\+::string display\+Tag, int code)
\begin{DoxyCompactList}\small\item\em to add a paipi event to be detected \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_afe15af4a56d01f67079d7ff544b85bb7}{add\+Papi\+Tag}} (std\+::string display\+Tag, std\+::string papi\+Tag)
\begin{DoxyCompactList}\small\item\em to add a paipi event to be detected \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_ad676ee4ec502fda231b773bb315eff9c}\label{classINTELLI_1_1ThreadPerfPAPI_ad676ee4ec502fda231b773bb315eff9c}} 
virtual void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_ad676ee4ec502fda231b773bb315eff9c}{set\+Perf\+List}} ()
\begin{DoxyCompactList}\small\item\em To set up all your interest perf events. \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_ab27c9d89af45c3e91c0e0233022e96a1}{start}} ()
\begin{DoxyCompactList}\small\item\em To start perf tracing. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a8bfe0e58f0a82ff77d638c98476358a7}\label{classINTELLI_1_1ThreadPerfPAPI_a8bfe0e58f0a82ff77d638c98476358a7}} 
virtual void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a8bfe0e58f0a82ff77d638c98476358a7}{end}} ()
\begin{DoxyCompactList}\small\item\em To end a perf tracing. \end{DoxyCompactList}\item 
virtual uint64\+\_\+t \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a87fac2fa35061c990442f81103f5ae9b}{get\+Result\+By\+Id}} (size\+\_\+t idx)
\begin{DoxyCompactList}\small\item\em Get the perf result by its index of Perf\+Pair. \end{DoxyCompactList}\item 
virtual uint64\+\_\+t \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_af53a0c94a04bb3dc7ed45c4d76ce445d}{get\+Result\+By\+Name}} (string name)
\begin{DoxyCompactList}\small\item\em Get the perf result by its name of of Perf\+Pair. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{Config\+Map\+Ptr}} \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a945f274ae74a979401a43fd42c699e79}{result\+To\+Config\+Map}} ()
\begin{DoxyCompactList}\small\item\em convert the perf result into a \mbox{\hyperlink{classINTELLI_1_1ConfigMap}{Config\+Map}} \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a61e1e1a7a502e60f8247994d46c3dc4b}{init\+Events\+By\+Cfg}} (\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{Config\+Map\+Ptr}} cfg)
\begin{DoxyCompactList}\small\item\em init the perf events according to configmap \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_abe1bdc3624e923917a287c909097a15d}\label{classINTELLI_1_1ThreadPerfPAPI_abe1bdc3624e923917a287c909097a15d}} 
void {\bfseries init\+Papi\+Lib} ()
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a460dd98c0f773faf34276ba8b1f7f06f}\label{classINTELLI_1_1ThreadPerfPAPI_a460dd98c0f773faf34276ba8b1f7f06f}} 
void {\bfseries clear\+Papi\+Lib} ()
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a06b911b36fc7002eeb8f5c3362931980}\label{classINTELLI_1_1ThreadPerfPAPI_a06b911b36fc7002eeb8f5c3362931980}} 
void {\bfseries add\+Papi\+Event\+Inline} (int ecode)
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_ae7788c25cfffa299a76b7a211f8c114d}\label{classINTELLI_1_1ThreadPerfPAPI_ae7788c25cfffa299a76b7a211f8c114d}} 
std\+::vector$<$ std\+::string $>$ {\bfseries papi\+Str\+Vec}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a0af8c9c2dc7d95774c9360acd4dbe12e}\label{classINTELLI_1_1ThreadPerfPAPI_a0af8c9c2dc7d95774c9360acd4dbe12e}} 
std\+::vector$<$ uint64\+\_\+t $>$ {\bfseries papi\+Value\+Vec}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a1d6ec7668869d4e287f78beda71720bb}\label{classINTELLI_1_1ThreadPerfPAPI_a1d6ec7668869d4e287f78beda71720bb}} 
std\+::vector$<$ int $>$ {\bfseries papi\+Event\+Vec}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a60cebbc510ba5b2448d5f914cc55cf24}\label{classINTELLI_1_1ThreadPerfPAPI_a60cebbc510ba5b2448d5f914cc55cf24}} 
int {\bfseries retval}
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a43c28ca98a85546c7c014d117100e647}\label{classINTELLI_1_1ThreadPerfPAPI_a43c28ca98a85546c7c014d117100e647}} 
int {\bfseries Event\+Set} = PAPI\+\_\+\+NULL
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_abfa4056bc58c09675898db6c93d611f4}\label{classINTELLI_1_1ThreadPerfPAPI_abfa4056bc58c09675898db6c93d611f4}} 
int {\bfseries dummycollect} = 0
\item 
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a23efab57de87aefdc9801821d24f85c0}\label{classINTELLI_1_1ThreadPerfPAPI_a23efab57de87aefdc9801821d24f85c0}} 
int {\bfseries eventcode}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The top entity to provide perf traces by using PAPI lib. 

\begin{DoxyNote}{Note}
You may overwrite the set\+Perf\+List function for your own interested events 
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
only works in Linux, and make sure you have opened perf in your kernel and have the access 
\end{DoxyWarning}
\begin{DoxyNote}{Note}
Requires the \mbox{\hyperlink{classINTELLI_1_1ConfigMap}{Config\+Map}} Util 

require configs of perf
\begin{DoxyItemize}
\item perf\+Instructions, whether or not profile instructions, 1
\item perf\+Cycles, to record cpu cycles, 0
\item perf\+Mem\+Read, to record the memory read times, 0
\item perf\+Mem\+Write, to record the memory write times, 0 
\end{DoxyItemize}

General set up
\begin{DoxyItemize}
\item create the class
\item call \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a61e1e1a7a502e60f8247994d46c3dc4b}{init\+Events\+By\+Cfg}}, You may overwrite it function in child classes for your own interested events
\item call \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_ab27c9d89af45c3e91c0e0233022e96a1}{start}}
\item run your own process
\item call \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a8bfe0e58f0a82ff77d638c98476358a7}{end}}
\item get the results, by \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a87fac2fa35061c990442f81103f5ae9b}{get\+Result\+By\+Id}}, \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_af53a0c94a04bb3dc7ed45c4d76ce445d}{get\+Result\+By\+Name}}, or \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_a945f274ae74a979401a43fd42c699e79}{result\+To\+Config\+Map}} 
\end{DoxyItemize}
\end{DoxyNote}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a60f92e8ebf8ad274092884d568c6582a}\label{classINTELLI_1_1ThreadPerfPAPI_a60f92e8ebf8ad274092884d568c6582a}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!ThreadPerfPAPI@{ThreadPerfPAPI}}
\index{ThreadPerfPAPI@{ThreadPerfPAPI}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{ThreadPerfPAPI()}{ThreadPerfPAPI()}}
{\footnotesize\ttfamily INTELLI\+::\+Thread\+Perf\+PAPI\+::\+Thread\+Perf\+PAPI (\begin{DoxyParamCaption}\item[{int}]{cpu }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



To setup this perf to specific cpu. 


\begin{DoxyParams}{Parameters}
{\em cpu} & $>$=0 for any specific cpu, =-\/1 for all cpu that may run this process \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a16d0c4e647318d1d87daafdfa85832f4}\label{classINTELLI_1_1ThreadPerfPAPI_a16d0c4e647318d1d87daafdfa85832f4}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!addPapiTag@{addPapiTag}}
\index{addPapiTag@{addPapiTag}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{addPapiTag()}{addPapiTag()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void INTELLI\+::\+Thread\+Perf\+PAPI\+::add\+Papi\+Tag (\begin{DoxyParamCaption}\item[{std\+::string}]{display\+Tag,  }\item[{int}]{code }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



to add a paipi event to be detected 


\begin{DoxyParams}{Parameters}
{\em display\+Tag} & the tag to be displayed in your results \\
\hline
{\em code} & the papi lib event code \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_afe15af4a56d01f67079d7ff544b85bb7}\label{classINTELLI_1_1ThreadPerfPAPI_afe15af4a56d01f67079d7ff544b85bb7}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!addPapiTag@{addPapiTag}}
\index{addPapiTag@{addPapiTag}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{addPapiTag()}{addPapiTag()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void INTELLI\+::\+Thread\+Perf\+PAPI\+::add\+Papi\+Tag (\begin{DoxyParamCaption}\item[{std\+::string}]{display\+Tag,  }\item[{std\+::string}]{papi\+Tag }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



to add a paipi event to be detected 


\begin{DoxyParams}{Parameters}
{\em display\+Tag} & the tag to be displayed in your results \\
\hline
{\em papi\+Tag} & the built-\/in tag of papi lib \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a87fac2fa35061c990442f81103f5ae9b}\label{classINTELLI_1_1ThreadPerfPAPI_a87fac2fa35061c990442f81103f5ae9b}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!getResultById@{getResultById}}
\index{getResultById@{getResultById}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{getResultById()}{getResultById()}}
{\footnotesize\ttfamily virtual uint64\+\_\+t INTELLI\+::\+Thread\+Perf\+PAPI\+::get\+Result\+By\+Id (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{idx }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Get the perf result by its index of Perf\+Pair. 


\begin{DoxyParams}{Parameters}
{\em idx} & The index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classINTELLI_1_1ThreadPerf_af1495ec91331d23108522762c60aebcc}{INTELLI\+::\+Thread\+Perf}}.

\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_af53a0c94a04bb3dc7ed45c4d76ce445d}\label{classINTELLI_1_1ThreadPerfPAPI_af53a0c94a04bb3dc7ed45c4d76ce445d}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!getResultByName@{getResultByName}}
\index{getResultByName@{getResultByName}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{getResultByName()}{getResultByName()}}
{\footnotesize\ttfamily virtual uint64\+\_\+t INTELLI\+::\+Thread\+Perf\+PAPI\+::get\+Result\+By\+Name (\begin{DoxyParamCaption}\item[{string}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Get the perf result by its name of of Perf\+Pair. 


\begin{DoxyParams}{Parameters}
{\em idx} & The index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The value 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classINTELLI_1_1ThreadPerf_aac9b0548fbe674e43ea1fc12b0b223ce}{INTELLI\+::\+Thread\+Perf}}.

\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a61e1e1a7a502e60f8247994d46c3dc4b}\label{classINTELLI_1_1ThreadPerfPAPI_a61e1e1a7a502e60f8247994d46c3dc4b}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!initEventsByCfg@{initEventsByCfg}}
\index{initEventsByCfg@{initEventsByCfg}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{initEventsByCfg()}{initEventsByCfg()}}
{\footnotesize\ttfamily void INTELLI\+::\+Thread\+Perf\+PAPI\+::init\+Events\+By\+Cfg (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{Config\+Map\+Ptr}}}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



init the perf events according to configmap 


\begin{DoxyParams}{Parameters}
{\em cfg} & tyhe configmap \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classINTELLI_1_1ThreadPerf_a94a366e2f9276dade12c8985912a57f8}{INTELLI\+::\+Thread\+Perf}}.

\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_a945f274ae74a979401a43fd42c699e79}\label{classINTELLI_1_1ThreadPerfPAPI_a945f274ae74a979401a43fd42c699e79}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!resultToConfigMap@{resultToConfigMap}}
\index{resultToConfigMap@{resultToConfigMap}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{resultToConfigMap()}{resultToConfigMap()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{Config\+Map\+Ptr}} INTELLI\+::\+Thread\+Perf\+PAPI\+::result\+To\+Config\+Map (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



convert the perf result into a \mbox{\hyperlink{classINTELLI_1_1ConfigMap}{Config\+Map}} 

\begin{DoxyReturn}{Returns}
The key-\/value store of config\+Map, in shared pointer 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
must stop after calling stop 
\end{DoxyNote}


Reimplemented from \mbox{\hyperlink{classINTELLI_1_1ThreadPerf_a81cc283af578a49b56d6c4e713b4d9f5}{INTELLI\+::\+Thread\+Perf}}.

\mbox{\Hypertarget{classINTELLI_1_1ThreadPerfPAPI_ab27c9d89af45c3e91c0e0233022e96a1}\label{classINTELLI_1_1ThreadPerfPAPI_ab27c9d89af45c3e91c0e0233022e96a1}} 
\index{INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}!start@{start}}
\index{start@{start}!INTELLI::ThreadPerfPAPI@{INTELLI::ThreadPerfPAPI}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily virtual void INTELLI\+::\+Thread\+Perf\+PAPI\+::start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



To start perf tracing. 

\begin{DoxyNote}{Note}
call after \mbox{\hyperlink{classINTELLI_1_1ThreadPerfPAPI_ad676ee4ec502fda231b773bb315eff9c}{set\+Perf\+List}} 
\end{DoxyNote}


Reimplemented from \mbox{\hyperlink{classINTELLI_1_1ThreadPerf_aa5eefc6413178c6b01c133e7a3a395a5}{INTELLI\+::\+Thread\+Perf}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/\+Utils/\mbox{\hyperlink{ThreadPerfPAPI_8hpp}{Thread\+Perf\+PAPI.\+hpp}}\end{DoxyCompactItemize}
