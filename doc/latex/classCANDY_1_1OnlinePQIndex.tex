\hypertarget{classCANDY_1_1OnlinePQIndex}{}\doxysection{CANDY\+::Online\+PQIndex Class Reference}
\label{classCANDY_1_1OnlinePQIndex}\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}


The class of online PQ approach, using IVF-\/style coarse-\/grained + fine-\/grained quantizers.  




{\ttfamily \#include $<$CANDY/\+Online\+PQIndex.\+h$>$}



Inheritance diagram for CANDY\+::Online\+PQIndex\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{classCANDY_1_1OnlinePQIndex__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for CANDY\+::Online\+PQIndex\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classCANDY_1_1OnlinePQIndex__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_aea3c807d9ea89fdd9265dc5bfea5f70e}{load\+Initial\+Tensor}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em load the initial tensors of a data base, use this BEFORE \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}{insert\+Tensor}} \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a84c751419ba98c6380c1bde5f4558a59}\label{classCANDY_1_1OnlinePQIndex_a84c751419ba98c6380c1bde5f4558a59}} 
virtual void \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a84c751419ba98c6380c1bde5f4558a59}{reset}} ()
\begin{DoxyCompactList}\small\item\em reset this index to inited status \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a1823178439f62386371dfa219a0a9836}{set\+Config}} (\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{INTELLI\+::\+Config\+Map\+Ptr}} cfg)
\begin{DoxyCompactList}\small\item\em set the index-\/specific config related to one index \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}{insert\+Tensor}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em insert a tensor \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a192374ae2c6b1fae306c6866fa06658e}{delete\+Tensor}} (torch\+::\+Tensor \&t, int64\+\_\+t k=1)
\begin{DoxyCompactList}\small\item\em delete a tensor \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a731683831efe8a75a15868dfc052c20b}{revise\+Tensor}} (torch\+::\+Tensor \&t, torch\+::\+Tensor \&w)
\begin{DoxyCompactList}\small\item\em revise a tensor \end{DoxyCompactList}\item 
virtual std\+::vector$<$ torch\+::\+Tensor $>$ \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a7d3ccc9d9bfb6366e6c790917be6de03}{search\+Tensor}} (torch\+::\+Tensor \&q, int64\+\_\+t k)
\begin{DoxyCompactList}\small\item\em search the k-\/\+NN of a query tensor, return the result tensors \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_aef597a9e5d1bd1aec85845c93f066609}{offline\+Build}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em offline build phase \end{DoxyCompactList}\item 
virtual bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a2be3eb37e51dbbb4b5a153389b0b408a}{set\+Frozen\+Level}} (int64\+\_\+t frozen\+Lv)
\begin{DoxyCompactList}\small\item\em set the frozen level of online updating internal state \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a9658503aaa0463c3238d5f6d099b6f62}\label{classCANDY_1_1OnlinePQIndex_a9658503aaa0463c3238d5f6d099b6f62}} 
bool {\bfseries try\+Load\+Quantizers} (void)
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a550263949799ab1323381d9ec5b35ab8}\label{classCANDY_1_1OnlinePQIndex_a550263949799ab1323381d9ec5b35ab8}} 
std\+::vector$<$ int64\+\_\+t $>$ {\bfseries coarse\+Grained\+Encode} (torch\+::\+Tensor \&t, torch\+::\+Tensor $\ast$residential)
\item 
std\+::vector$<$ std\+::vector$<$ uint8\+\_\+t $>$ $>$ \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_a9d33a17ae049ff876054aa7d792c282d}{fine\+Grained\+Encode}} (torch\+::\+Tensor \&residential)
\item 
bool \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_abff81a265db6e1b9d62bf13c57df7164}{delete\+Rows\+Inline}} (torch\+::\+Tensor \&t)
\begin{DoxyCompactList}\small\item\em the inline function of deleting rows \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a185af954912b554366386eec7bd9aad6}\label{classCANDY_1_1OnlinePQIndex_a185af954912b554366386eec7bd9aad6}} 
\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{INTELLI\+::\+Config\+Map\+Ptr}} {\bfseries my\+Cfg} = nullptr
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_aca7355ae404c4be159e1577a8b85061a}\label{classCANDY_1_1OnlinePQIndex_aca7355ae404c4be159e1577a8b85061a}} 
int64\+\_\+t {\bfseries last\+NNZ} = 0
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a275fd0f18adc6467a78d023c1af91501}\label{classCANDY_1_1OnlinePQIndex_a275fd0f18adc6467a78d023c1af91501}} 
int64\+\_\+t {\bfseries vec\+Dim} = 0
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a64b9e3f78e10653b01eeb07a70ec49d0}\label{classCANDY_1_1OnlinePQIndex_a64b9e3f78e10653b01eeb07a70ec49d0}} 
int64\+\_\+t {\bfseries coarse\+Grained\+Clusters} = 4096
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_aefad56a9c9899008bddc4b4490947436}\label{classCANDY_1_1OnlinePQIndex_aefad56a9c9899008bddc4b4490947436}} 
int64\+\_\+t {\bfseries sub\+Quantizers} = 8
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a48be4603f4fa5fc937d711844b3e584a}\label{classCANDY_1_1OnlinePQIndex_a48be4603f4fa5fc937d711844b3e584a}} 
int64\+\_\+t {\bfseries fine\+Grained\+Clusters} = 256
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a5f82b01080845c09432bdf6dd56ca91d}\label{classCANDY_1_1OnlinePQIndex_a5f82b01080845c09432bdf6dd56ca91d}} 
int64\+\_\+t {\bfseries cuda\+Build} = 0
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a4b780f6db16122592dceae1cf13fe79d}\label{classCANDY_1_1OnlinePQIndex_a4b780f6db16122592dceae1cf13fe79d}} 
int64\+\_\+t {\bfseries max\+Build\+Iteration} = 1000
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a7c4cab354ead9f0d27df3b175722c7b0}\label{classCANDY_1_1OnlinePQIndex_a7c4cab354ead9f0d27df3b175722c7b0}} 
int64\+\_\+t {\bfseries candidate\+Times} = 1
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a75fd34448d9a950b37ecc130950aef14}\label{classCANDY_1_1OnlinePQIndex_a75fd34448d9a950b37ecc130950aef14}} 
int64\+\_\+t {\bfseries disable\+ADC} = 0
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a8c95e47bd2314d9468b32a1a36bf545b}\label{classCANDY_1_1OnlinePQIndex_a8c95e47bd2314d9468b32a1a36bf545b}} 
bool {\bfseries is\+Built} = false
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a2b246340774cbe3c1b9debdee7c9b824}\label{classCANDY_1_1OnlinePQIndex_a2b246340774cbe3c1b9debdee7c9b824}} 
std\+::string {\bfseries coarse\+Grained\+Built\+Path}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_ab444c45c03a8eacc2258df4cb07ebf0b}\label{classCANDY_1_1OnlinePQIndex_ab444c45c03a8eacc2258df4cb07ebf0b}} 
std\+::string {\bfseries fine\+Grained\+Built\+Path}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a09a594958002fa7c0f25cebe0c1eb93a}\label{classCANDY_1_1OnlinePQIndex_a09a594958002fa7c0f25cebe0c1eb93a}} 
\mbox{\hyperlink{group__CANDY__lib__bottom__sub_gae2a9b99940c085c2f3bd12cfd4741320}{Simple\+Stream\+Clustering\+Ptr}} {\bfseries coarse\+Quantizer\+Ptr}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_afc8dec870c776f47ecdc91d0b7f5709d}\label{classCANDY_1_1OnlinePQIndex_afc8dec870c776f47ecdc91d0b7f5709d}} 
std\+::vector$<$ \mbox{\hyperlink{group__CANDY__lib__bottom__sub_gae2a9b99940c085c2f3bd12cfd4741320}{Simple\+Stream\+Clustering\+Ptr}} $>$ {\bfseries fine\+Quantizer\+Ptrs}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a68bd99ab3440cd072fc072fb3cdbbc22}\label{classCANDY_1_1OnlinePQIndex_a68bd99ab3440cd072fc072fb3cdbbc22}} 
std\+::vector$<$ int64\+\_\+t $>$ {\bfseries sub\+Quantizer\+Start\+Pos}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_afc5e8b8b166009f2acd43b89fdb9da2d}\label{classCANDY_1_1OnlinePQIndex_afc5e8b8b166009f2acd43b89fdb9da2d}} 
std\+::vector$<$ int64\+\_\+t $>$ {\bfseries sub\+Quantizer\+End\+Pos}
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_af313c287bdc553334f566eb06a7125dd}\label{classCANDY_1_1OnlinePQIndex_af313c287bdc553334f566eb06a7125dd}} 
int64\+\_\+t {\bfseries frozen\+Level} = 0
\item 
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a5390be679b3cd9f0131dc9257c7b00a5}\label{classCANDY_1_1OnlinePQIndex_a5390be679b3cd9f0131dc9257c7b00a5}} 
\mbox{\hyperlink{classCANDY_1_1IVFTensorEncodingList}{IVFTensor\+Encoding\+List}} {\bfseries IVFList}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
The class of online PQ approach, using IVF-\/style coarse-\/grained + fine-\/grained quantizers. 

\begin{DoxyNote}{Note}
currently single thread 

config parameters
\begin{DoxyItemize}
\item vec\+Dim, the dimension of vectors, default 768, I64
\item coarse\+Grained\+Clusters,the number of coarse-\/grained clusters, default 4096, I64
\item fine\+Grained\+Clusters,the number of fine-\/grained clusters in each sub quantizer, default 256, 1$\sim$256 I64
\item sub\+Quantizers, the number of sub quantizers, default 8, I64
\item coarse\+Grained\+Built\+Path, the path of built coarse grained centroids, default \char`\"{}\+Online\+PQIndex\+\_\+coarse.\+rbt\char`\"{}, String
\item fine\+Grained\+Built\+Path, the path of built fine grained centroids, default \char`\"{}\+Online\+PQIndex\+\_\+fine.\+tbt\char`\"{}, String
\item cuda\+Build, whether using cuda in building phase, default 0, I64
\item max\+Build\+Iteration, the maxium iterations of buildoing, default 1000, I64
\item candidate\+Times, the times of k to determine minimum candidates, default 1 ,I64
\item disable\+ADC, set this to 1 will disable ADC or residential computing and go back to IVFPQ, default 0 (means IVFADC mode), I64 
\end{DoxyItemize}
\end{DoxyNote}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_abff81a265db6e1b9d62bf13c57df7164}\label{classCANDY_1_1OnlinePQIndex_abff81a265db6e1b9d62bf13c57df7164}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!deleteRowsInline@{deleteRowsInline}}
\index{deleteRowsInline@{deleteRowsInline}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{deleteRowsInline()}{deleteRowsInline()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::delete\+Rows\+Inline (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



the inline function of deleting rows 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, multiple rows \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the deleting is successful 
\end{DoxyReturn}
\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a192374ae2c6b1fae306c6866fa06658e}\label{classCANDY_1_1OnlinePQIndex_a192374ae2c6b1fae306c6866fa06658e}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!deleteTensor@{deleteTensor}}
\index{deleteTensor@{deleteTensor}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{deleteTensor()}{deleteTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::delete\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{int64\+\_\+t}]{k = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



delete a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, recommend single row \\
\hline
{\em k} & the number of nearest neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the deleting is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a56adc37171b02a9e667f10e35c0682d8}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a9d33a17ae049ff876054aa7d792c282d}\label{classCANDY_1_1OnlinePQIndex_a9d33a17ae049ff876054aa7d792c282d}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!fineGrainedEncode@{fineGrainedEncode}}
\index{fineGrainedEncode@{fineGrainedEncode}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{fineGrainedEncode()}{fineGrainedEncode()}}
{\footnotesize\ttfamily std\+::vector$<$ std\+::vector$<$ uint8\+\_\+t $>$ $>$ CANDY\+::\+Online\+PQIndex\+::fine\+Grained\+Encode (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{residential }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}


\begin{DoxyEnumerate}
\item get the output of each subquantizer
\end{DoxyEnumerate}\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}\label{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!insertTensor@{insertTensor}}
\index{insertTensor@{insertTensor}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{insertTensor()}{insertTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::insert\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



insert a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, accept multiple rows \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the insertion is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a10e65ecee21528fe6df84114b61110d4}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_aea3c807d9ea89fdd9265dc5bfea5f70e}\label{classCANDY_1_1OnlinePQIndex_aea3c807d9ea89fdd9265dc5bfea5f70e}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!loadInitialTensor@{loadInitialTensor}}
\index{loadInitialTensor@{loadInitialTensor}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{loadInitialTensor()}{loadInitialTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::load\+Initial\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



load the initial tensors of a data base, use this BEFORE \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}{insert\+Tensor}} 

\begin{DoxyNote}{Note}
This is majorly an offline function, and is different from \mbox{\hyperlink{classCANDY_1_1OnlinePQIndex_acfd9ce8a70d7d5c5c43fbb900b652974}{insert\+Tensor}} for this one\+:
\begin{DoxyItemize}
\item The frozen level is forced to be 0 since the data is initial data
\item Will try to build clusters from scratch if they are not successfully loaded 
\end{DoxyItemize}
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor, some index need to be single row \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the loading is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_af801592ccc0813c97a2ff45da40a1312}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_aef597a9e5d1bd1aec85845c93f066609}\label{classCANDY_1_1OnlinePQIndex_aef597a9e5d1bd1aec85845c93f066609}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!offlineBuild@{offlineBuild}}
\index{offlineBuild@{offlineBuild}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{offlineBuild()}{offlineBuild()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::offline\+Build (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



offline build phase 

\begin{DoxyNote}{Note}
In this index, call offline\+Build will do the following\textquotesingle{}
\begin{DoxyItemize}
\item Build cluster centroids of both coarse grained and fine grained quantizers from t
\item Save the centroids to raw binary tensor files, the names are as specified in \textquotesingle{}coarse\+Grained\+Built\+Path\textquotesingle{} and \textquotesingle{}fine\+Grained\+Built\+Path 
\end{DoxyItemize}
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em t} & the tensor for offline build \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the building is successful 
\end{DoxyReturn}

\begin{DoxyEnumerate}
\item build the coarse-\/grained clusters
\item calculate the residential
\item build sub quantizers
\end{DoxyEnumerate}

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_aca873d66824f385feac1a7cb49abdfac}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a731683831efe8a75a15868dfc052c20b}\label{classCANDY_1_1OnlinePQIndex_a731683831efe8a75a15868dfc052c20b}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!reviseTensor@{reviseTensor}}
\index{reviseTensor@{reviseTensor}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{reviseTensor()}{reviseTensor()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::revise\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{t,  }\item[{torch\+::\+Tensor \&}]{w }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



revise a tensor 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor to be revised, recommend single row \\
\hline
{\em w} & the revised value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the revising is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a90e72adba27ddcf8c71180f557bb78d5}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a7d3ccc9d9bfb6366e6c790917be6de03}\label{classCANDY_1_1OnlinePQIndex_a7d3ccc9d9bfb6366e6c790917be6de03}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!searchTensor@{searchTensor}}
\index{searchTensor@{searchTensor}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{searchTensor()}{searchTensor()}}
{\footnotesize\ttfamily std\+::vector$<$ torch\+::\+Tensor $>$ CANDY\+::\+Online\+PQIndex\+::search\+Tensor (\begin{DoxyParamCaption}\item[{torch\+::\+Tensor \&}]{q,  }\item[{int64\+\_\+t}]{k }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



search the k-\/\+NN of a query tensor, return the result tensors 


\begin{DoxyParams}{Parameters}
{\em t} & the tensor, allow multiple rows \\
\hline
{\em k} & the returned neighbors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
std\+::vector$<$torch\+::\+Tensor$>$ the result tensor for each row of query 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a39069fe9cb1f16910695c091b768dbe8}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a1823178439f62386371dfa219a0a9836}\label{classCANDY_1_1OnlinePQIndex_a1823178439f62386371dfa219a0a9836}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!setConfig@{setConfig}}
\index{setConfig@{setConfig}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{setConfig()}{setConfig()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::set\+Config (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__INTELLI__UTIL__CONFIGS_gaeb9674f6f5860b687d73f618962dfcea}{INTELLI\+::\+Config\+Map\+Ptr}}}]{cfg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



set the index-\/specific config related to one index 


\begin{DoxyParams}{Parameters}
{\em cfg} & the config of this class \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool whether the configuration is successful 
\end{DoxyReturn}
create cluster instances

Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a01f91296bd41aa55dd6a4c6465cc3a19}{CANDY\+::\+Abstract\+Index}}.

\mbox{\Hypertarget{classCANDY_1_1OnlinePQIndex_a2be3eb37e51dbbb4b5a153389b0b408a}\label{classCANDY_1_1OnlinePQIndex_a2be3eb37e51dbbb4b5a153389b0b408a}} 
\index{CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}!setFrozenLevel@{setFrozenLevel}}
\index{setFrozenLevel@{setFrozenLevel}!CANDY::OnlinePQIndex@{CANDY::OnlinePQIndex}}
\doxysubsubsection{\texorpdfstring{setFrozenLevel()}{setFrozenLevel()}}
{\footnotesize\ttfamily bool CANDY\+::\+Online\+PQIndex\+::set\+Frozen\+Level (\begin{DoxyParamCaption}\item[{int64\+\_\+t}]{frozen\+Lv }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



set the frozen level of online updating internal state 


\begin{DoxyParams}{Parameters}
{\em frozen\+Lv} & the level of frozen, 0 means freeze any online update in internal state \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
the frozen levels
\begin{DoxyItemize}
\item 0 frozen everything
\item 1 frozen fine-\/grained clusters
\item 2 frozen coarse-\/grained clusters
\item $>$=3 frozen nothing 
\end{DoxyItemize}
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
whether the setting is successful 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classCANDY_1_1AbstractIndex_a637e0a15f3753c2188da92f8b787061d}{CANDY\+::\+Abstract\+Index}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\+CANDY/\mbox{\hyperlink{OnlinePQIndex_8h}{Online\+PQIndex.\+h}}\item 
src/\+CANDY/\mbox{\hyperlink{OnlinePQIndex_8cpp}{Online\+PQIndex.\+cpp}}\end{DoxyCompactItemize}
